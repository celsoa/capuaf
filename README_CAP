/home/carltape/seismo/grp-utils/cap

Probably you should read README and README_supp first.
Below are the quick-start instructions to see if everything is working.

-----------

0. if on UAF cluster, check modules (GMT, netcdf, gfortran)

> module purge
> module load PrgEnv-gnu/4.5.1 gmt/4.5.7
> module list

load environment variables

> source $EUTIL/seismo_bashrc

check paths

> echo $CAPHOME
> echo $NRHOME_C
> echo $GMTHOME

1. set up directories
   check that you have the environment variable $CAPRUN

> echo $CAPRUN
> cd $CAPRUN
> mkdir -p models inv
> mkdir -p models/cus inv/cus

2. check path to utilities

> which cap fk pssac2

3. run fk

> cd $CAPRUN/models/cus
> cp $SUTIL/grp-utils/fk3.0/cus .
> fk.pl -Mcus/15 -N512/0.4/2 140 145 205 230 260 275 295

4. run cap

> cd $CAPRUN/inv/cus
> rsync -av $SUTIL/grp-utils/cap/20080418093700 .
> cap.pl -H0.2 -P2.2e-6 -S2/5/0 -T35/70 -F -D2/1/0.5 -C0.05/0.3/0.02/0.1 -W1 -X10 -Mcus_15/5.0 20080418093700
> gv 20080418093700/cus_015.ps

You should see a reasonable output for a moment tensor inversion.

5. perform the depth test

This requires computing Green's functions for the depths used in the grid search.

> cd $CAPRUN/models/cus
> fk.pl -Mcus/5 -N512/0.4/2 140 145 205 230 260 275 295
> fk.pl -Mcus/10 -N512/0.4/2 140 145 205 230 260 275 295
> fk.pl -Mcus/20 -N512/0.4/2 140 145 205 230 260 275 295
> fk.pl -Mcus/25 -N512/0.4/2 140 145 205 230 260 275 295
> fk.pl -Mcus/30 -N512/0.4/2 140 145 205 230 260 275 295

Then perform the grid search over depth.

> cd $CAPRUN/inv/cus

THIS NEEDS TO BE UPDATED WITH A NEW SCRIPT: depth_cap.pl

-----------