DATA EXTRACTION and SETUP

These instructions assume that the user is on the UAF seismo linux network, which has environmental variables $PYSEIS, $CAPHOME, etc.

0. compile CAP
> cd $CAPHOME
> make clean
> make all >& make.log

1. Extract waveforms from IRIS:
> cd $PYSEIS
> python run_getwaveform.py

This will create the data directory 20090407201255351 inside $PYSEIS

2. prepare for running cap

> cd $CAPRUN
> mkdir -p inv/scak
> cd $CAPRUN/inv/scak
> rsync -av $PYSEIS/20090407201255351 .

3. Copy input weight file into the data directory:
Only the 'clean' stations are selected in this weight file

> cp $CAPHOME/EXAMPLES/20090407201255351_check/weight.dat ./20090407201255351/weight_test.dat

4. run cap

> cap.pl -H0.02 -P1/15/60 -p1 -S2/10/0 -T15/150 -D1/1/0.5 -C0.25/0.6667/0.025/0.0625 -Y1 -Zweight_test.dat -Mscak_39 -m4.5 -I50000 -R0/0 20090407201255351

OR  use a parameter file
> cp $CAPHOME/EXAMPLES/flags.pf $PYSEIS
> cap.pl flags.pf
