EXAMPLE 1: Running Alaska Example (20090407201255351)

1. open cap.c and check that FTC_data=1 and FTC_green=0 (recompile if needed: make all >& make.log )

2. prepare run
> mkdir -p $CAPRUN/inv/scak
> cd $CAPRUN/inv/scak
> rsync -av $CAPHOME/EXAMPLES/20090407201255351 .

3. Eight different weight files options: weightijk.dat (Last three numbers are for (i)-body wave, (j)-surface waves, (k)-station choice)
   i = 1 or 0 for whether body waves are used or not
   j = 1 or 0 for whether surface waves are used or not
   k = 0 for all stations, 1 for selected stations, 2 for AEC stations

 -> weight011.dat - only surface waves at selected good stations (M011)
 -> weight012.dat - only surface waves at AEC stations (M012)
 -> weight101.dat - only body waves at selected good stations (M101)
 -> weight110.dat - both body and surface wave at all available stations (M110)
 -> weight111.dat - both body and surface wave at selected good stations (M111)
 -> weight112.dat - both body and surface wave at AEIC stations (M112)
 -> az_sort_weight110.dat - same as weight110.dat but azimuthally sorted stations
 -> az_sort_weight111.dat - same as weight111.dat but azimuthally sorted stations

--------------------------------------------------------------------------------
4. Example commands:
a. Using body and surface waves at selected stations (M111)
Using L1 norm:
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight111.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_041.ps &
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M111.ps &

Depth test
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight111.dat -E1 -K1 -Y1 -A30/50/2 20090407201255351
> depth_test 20090407201255351 scak
> gv dep_20090407201255351.ps &
> gv $CAPHOME/EXAMPLES/20090407201255351_check/dep_20090407201255351_L1_M111.ps &

Using L2 norm: 
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight111.dat -E1 -K1 -Y2 20090407201255351
> gv 20090407201255351/scak_041.ps &
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L2_M111.ps &

Depth test
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight111.dat -E1 -K1 -Y2 -A30/50/2 20090407201255351
> depth_test 20090407201255351 scak
> gv dep_20090407201255351.ps &
> gv $CAPHOME/EXAMPLES/20090407201255351_check/dep_20090407201255351_L2_M111.ps &

--------------------------------------------------------------------------------

b. Using body and surface waves at all stations (M110)
Using L1 norm:
> cap.pl -H0.02 -P2e-6/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight110.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_041.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M110.ps &

Depth test
> cap.pl -H0.02 -P2e-6/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight110.dat -E1 -K1 -Y1 -A30/50/2 20090407201255351
> depth_test 20090407201255351 scak
> gv dep_20090407201255351.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/dep_20090407201255351_L1_M110.ps & 

Using L2 norm: 
> cap.pl -H0.02 -P2e-6/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight110.dat -E1 -K1 -Y2 20090407201255351
> gv 20090407201255351/scak_041.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L2_M110.ps & 

Depth test
> cap.pl -H0.02 -P2e-6/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight110.dat -E1 -K1 -Y2 -A30/50/2 20090407201255351
> depth_test 20090407201255351 scak
> gv dep_20090407201255351.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/dep_20090407201255351_L2_M110.ps & 
--------------------------------------------------------------------------------

5. Similarly run for other weight files. 
a. Using body and surface waves at AEC stations (M112) and L1 norm
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0.1 -Zweight112.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_041.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M112.ps & 

b. Using just body at selected stations (M101)
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_27/4.5 -I10/0.1 -Zweight101.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_027.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M101.ps & 

c. Using just surface waves at selected stations (M011)
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_47/4.5 -I10/0.1 -Zweight011.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_047.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M011.ps & 

d. Using just the surface waves at AEC stations (M012)
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_47/4.5 -I10/0.1 -Zweight012.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_047.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M012.ps & 
--------------------------------------------------------------------------------

6. fixed solution (for plot testing)
> cap.pl -H0.02 -P1/20/60 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/5.0 -R20/20/42/42/-90/-90 -I10/0.1 -Zweight111.dat -E1 -K1 -Y1 20090407201255351

7. For azimuthally sorted stations:
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_41/4.5 -I10/0 -Zaz_sort_weight111.dat -E1 -K1 -Y1 20090407201255351
> gv 20090407201255351/scak_041.ps & 
> gv $CAPHOME/EXAMPLES/20090407201255351_check/20090407201255351_L1_M111_az.ps & 

====================================================================================
EXAMPLE 2: Running Alaska Example (20080918194353069) - Checking FTC data and green's outputs

1. open cap.c and set FTC_data=0 and FTC_green=0 (Filter and Cut 'NOT applied' to data and synthetics both) and recompile 
> make all

2. prepare run
> mkdir -p $CAPRUN/inv/scak
> cd $CAPRUN/inv/scak
> rsync -av $CAPHOME/EXAMPLES/20080918194353069 .

3. run (Filter and Cut 'NOT applied' to data and synthetics both)
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_72/4.8 -I10/0.1 -Zweight101.dat -E1 -K1 -Y1 20080918194353069

4. Rename output files to prevent them from being overwritten
> mv 20080918194353069/scak_072.ps 20080918194353069/scak_072_off.ps 

5. open cap.c and set FTC_data=1 and FTC_green=1 and recompile 
> make all

6. run again (Filter and Cut 'applied' to data and synthetics both)
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_72/4.8 -I10/0.1 -Zweight101.dat -E1 -K1 -Y1 20080918194353069

7. mv 20080918194353069/scak_072.ps 20080918194353069/scak_072_on.ps 

8. open cap.c and set FTC_data=1 and FTC_green=0 and recompile 
> make all

9. run again (Filter and Cut 'applied' only to data and NOT to synthetics)
> cap.pl -H0.02 -P1/20/60 -p2 -S3/10/0 -T15/120 -D1/1/0.5 -C0.2/0.5/0.025/0.06 -W1 -Mscak_72/4.8 -I10/0.1 -Zweight101.dat -E1 -K1 -Y1 20080918194353069

10. mv 20080918194353069/scak_072.ps 20080918194353069/scak_072_on_off.ps 

11. Check results
> gv 20080918194353069/scak_072_off.ps &
> gv $CAPHOME/EXAMPLES/20080918194353069_check/FTC_off.ps &

> gv 20080918194353069/scak_072_on.ps &
> gv $CAPHOME/EXAMPLES/20080918194353069_check/FTC_on.ps &

> gv 20080918194353069/scak_072_on_off.ps &
> gv $CAPHOME/EXAMPLES/20080918194353069_check/FTC_on_off.ps &

12. Similarly you can try with different weight files (> ls 20080918194353069/weight*.dat). Also try depth tests. See more results at the best depth:
> evince $CAPHOME/EXAMPLES/20080918194353069_check/FTC_on_results.pdf
> evince $CAPHOME/EXAMPLES/20080918194353069_check/FTC_off_results.pdf

====================================================================================
EXAMPLE 3: Running Nenana triggering example (20120411092157444)

1. open cap.c and set FTC_data=1 and FTC_green=0 and recompile 
> make all

2. prepare run
> mkdir -p $CAPRUN/inv/scak
> cd $CAPRUN/inv/scak
> rsync -av $CAPHOME/EXAMPLES/20120411092157444 .

3. run 
> cap.pl -H0.02 -P2e-5/1/15 -p1.5 -S0.5/2/0 -T2/40 -D1/1/0.5 -C1/10/0.3/0.6 -W1 -Mtactmod_16/3.6 -Zweight111.dat -E1 -K1 -Y1 20120411092157444 -A10/30/1 
> depth_test 20120411092157444 tactmod

4. Check results
> gv dep_20120411092157444.ps & 
> gv $CAPHOME/EXAMPLES/20120411092157444_check/dep_20120411092157444.ps & 
(check that the best depth is 16 km)

> gv 20120411092157444/tactmod_016.ps & 
> gv $CAPHOME/EXAMPLES/20120411092157444_check/tactmod_016.ps & 
